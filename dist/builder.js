import{c as I,S as bt,u as j,r as z,j as e,D as ot,a as ct,v as dt,b as yt,C as jt,W as Nt,R as T,A as Ke,d as Ge,n as se,e as kt,f as St}from"./WidgetRenderer.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=I("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=I("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=I("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=I("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=I("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=I("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=I("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=I("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=I("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=I("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=I("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=I("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=I("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=I("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=I("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=I("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=I("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=I("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=I("MoveHorizontal",[["polyline",{points:"18 8 22 12 18 16",key:"1hqrds"}],["polyline",{points:"6 8 2 12 6 16",key:"f0ernq"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=I("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=I("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=I("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=I("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=I("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=I("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=I("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=I("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=I("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=I("SquareDashedMousePointer",[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h2",key:"1qve2z"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v2",key:"p14lih"}],["path",{d:"M3 14v1",key:"vnatye"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=I("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=I("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=I("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=I("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=I("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),gt=[{type:"container",label:"עמודות",icon:Ht,create:()=>({type:"container",visible:!0,style:{padding:{top:16,bottom:16}},flex:{direction:"row",gap:16},columns:2,columnsChildren:[[],[]],children:[]})},{type:"heading",label:"כותרת",icon:Wt,create:()=>({type:"heading",content:"כותרת לדוגמה",tag:"h2",visible:!0,style:{fontSize:24,lineHeight:1,letterSpacing:0}})},{type:"text",label:"טקסט",icon:Vt,create:()=>({type:"text",content:"טקסט לדוגמה",visible:!0,style:{fontSize:16,lineHeight:1,letterSpacing:0,padding:{top:12,right:12,bottom:12,left:12}}})},{type:"button",label:"כפתור",icon:te,create:()=>({type:"button",label:"לחצו כאן",visible:!0,style:{background:"#111111",color:"#ffffff",padding:{top:8,bottom:8,left:12,right:12}}})},{type:"divider",label:"קו מפריד",icon:$t,create:()=>({type:"divider",thickness:1,visible:!0,style:{}})},{type:"spacer",label:"ריווח",icon:ht,create:()=>({type:"spacer",height:24,visible:!0,style:{}})},{type:"image",label:"תמונה",icon:he,create:()=>({type:"image",src:"https://picsum.photos/800/400",visible:!0,style:{borderRadius:8}})},{type:"video",label:"וידאו",icon:Bt,create:()=>({type:"video",src:"https://www.w3schools.com/html/mov_bbb.mp4",controls:!0,visible:!0,style:{}})},{type:"gallery",label:"גלריה",icon:It,create:()=>({type:"gallery",images:[],columns:3,gap:12,visible:!0,style:{}})},{type:"banner",label:"באנר",icon:Pt,create:()=>({type:"banner",backgroundImage:"https://picsum.photos/1200/500",overlayColor:"rgba(0,0,0,0.5)",heading:"<strong>מבצע!</strong>",text:"הנחות ענק",ctaLabel:"לפרטים",visible:!0,style:{minHeight:"360px"},contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:28,fontWeight:600,lineHeight:1,color:"#ffffff"},textStyle:{fontSize:16,lineHeight:1,color:"#ffffff"},buttonStyle:{background:"#2563eb",color:"#ffffff",borderRadius:6}})},{type:"marquee",label:"טקסט נע",icon:ut,create:()=>({type:"marquee",text:"ברוכים הבאים לחנות שלנו",speed:40,visible:!0,style:{}})},{type:"productSlider",label:"סליידר מוצרים",icon:bt,create:()=>({type:"productSlider",title:"מוצרים מומלצים",productIds:[],slidesPerView:{desktop:4,tablet:2,mobile:1},arrows:!0,dots:!1,autoplay:!1,visible:!0,style:{}})},{type:"html",label:"HTML",icon:zt,create:()=>({type:"html",html:"<div>תוכן HTML</div>",visible:!0,style:{}})}];function Ut(){var a;const i=j(b=>b.page),r=j(b=>b.addWidget),s=j(b=>b.addSection),p=j(b=>b.selected),[d,h]=z.useState("widgets"),[g,m]=z.useState(""),k=(a=i.sections[0])==null?void 0:a.id,N=z.useMemo(()=>(p==null?void 0:p.kind)==="section"?p.id:k,[p,k]);return e.jsxs("aside",{className:"h-full bg-white flex flex-col",children:[e.jsxs("div",{className:"border-b px-0 py-0 grid grid-cols-[1fr_auto] items-stretch gap-0",children:[e.jsxs("div",{className:"inline-flex w-full",children:[e.jsx("button",{className:`tab flex-1 ${d==="widgets"?"tab-active":""}`,onClick:()=>h("widgets"),children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(wt,{size:16})," אלמנטים"]})}),e.jsx("button",{className:`tab flex-1 ${d==="layers"?"tab-active":""}`,onClick:()=>h("layers"),children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(_t,{size:16})," שכבות"]})})]}),e.jsx("button",{className:"btn rounded-none h-auto w-11 px-0 flex items-center justify-center",style:{background:"var(--qs-outline-strong)",color:"#fff"},onClick:()=>s(),"aria-label":"הוסף שורה",children:e.jsx(Ot,{size:18})})]}),d==="widgets"&&e.jsxs("div",{className:"p-3 flex-1 overflow-y-auto scrollbar-thin",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("input",{className:"w-full h-9 rounded-md border px-9 text-sm",placeholder:"חיפוש אלמנט",value:g,onChange:b=>m(b.target.value)}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-400",children:"🔍"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:gt.filter(b=>b.label.includes(g)).map(b=>e.jsxs("button",{className:"card widget-tile overflow-hidden p-2 text-sm hover:bg-zinc-50 dark:hover:bg-zinc-900 flex flex-col items-center justify-center gap-2",draggable:!0,onDragStart:_=>{_.dataTransfer.setData("application/x-qs-widget",JSON.stringify({type:b.type,payload:b.create()})),_.dataTransfer.effectAllowed="copy",_.currentTarget.classList.add("dragging");const c=_.currentTarget.cloneNode(!0);c.style.boxShadow="0 6px 18px rgba(0,0,0,0.12)",c.style.opacity="1",c.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px";const C=_.currentTarget.getBoundingClientRect();c.style.width=`${C.width}px`,c.style.height=`${C.height}px`,c.style.display="flex",c.style.backgroundColor="#ffffff",c.style.alignItems="center",c.style.justifyContent="center",c.style.borderRadius="8px",document.body.appendChild(c),_.currentTarget.__dragPreview=c,_.dataTransfer.setDragImage(c,c.clientWidth/2,c.clientHeight/2)},onDragEnd:_=>{_.currentTarget.classList.remove("dragging");const c=_.currentTarget.__dragPreview;c&&c.parentNode&&c.parentNode.removeChild(c)},onClick:()=>N&&r(N,b.create()),children:[e.jsx(b.icon,{size:22}),e.jsx("span",{className:"text-xs",children:b.label})]},b.type))})]}),d==="layers"&&e.jsx(Jt,{})]})}function Jt(){const i=j(h=>h.page),r=j(h=>h.select),s=j(h=>h.removeWidget),p=j(h=>h.moveWidget),d=h=>{const{active:g,over:m}=h;if(!m)return;const[k,N]=String(g.id).split(":"),[a,,b]=String(m.id).split(":"),_=Number(b);!N||Number.isNaN(_)||k&&a&&p(N,a,_)};return e.jsx("div",{className:"p-2 flex-1 overflow-y-auto scrollbar-thin text-sm",children:e.jsx(ot,{onDragEnd:d,children:i.sections.map((h,g)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"px-2 py-1 text-xs font-medium text-zinc-600",children:["שורה ",g+1]}),e.jsx(ct,{items:h.widgets.map((m,k)=>`${h.id}:${m.id}:${k}`),strategy:dt,children:e.jsxs("div",{className:"ml-2 border rounded",children:[h.widgets.map((m,k)=>e.jsx(Ft,{sectionId:h.id,index:k,widget:m,onSelect:()=>r({kind:"widget",id:m.id}),onDelete:()=>s(m.id)},m.id)),h.widgets.length===0&&e.jsx("div",{className:"px-2 py-2 text-xs text-zinc-500",children:"אין פריטים"})]})})]},h.id))})})}function Ft({widget:i,sectionId:r,index:s,onSelect:p,onDelete:d}){const{setNodeRef:h,attributes:g,listeners:m,transform:k,transition:N}=yt({id:`${r}:${i.id}:${s}`});return e.jsxs("div",{ref:h,style:{transform:jt.Transform.toString(k),transition:N},className:"flex items-center justify-between px-2 py-1 hover:bg-zinc-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"cursor-grab active:cursor-grabbing text-zinc-500",...m,...g,"aria-label":"גרירה",children:e.jsx(Mt,{size:14})}),e.jsx("button",{className:"text-left",onClick:p,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.type==="image"?e.jsx(he,{size:14}):i.type==="heading"||i.type==="text"?e.jsx(Q,{size:14}):e.jsx("span",{className:"w-3 inline-block"}),e.jsx("span",{children:Kt(i.type)})]})})]}),e.jsx("button",{className:"text-zinc-500 hover:text-red-600",onClick:d,"aria-label":"מחיקה",children:e.jsx(pt,{size:14})})]})}function Kt(i){switch(i){case"heading":return"כותרת";case"text":return"טקסט";case"button":return"כפתור";case"divider":return"קו מפריד";case"spacer":return"ריווח";case"image":return"תמונה";case"video":return"וידאו";case"gallery":return"גלריה";case"banner":return"באנר";case"marquee":return"טקסט נע";case"productSlider":return"סליידר מוצרים";case"html":return"HTML";case"container":return"קונטיינר";default:return"אלמנט"}}function Gt(){const i=j(o=>o.page),r=j(o=>o.select),s=j(o=>o.moveWidget),p=j(o=>o.addWidgetAt),d=j(o=>o.addWidget),h=j(o=>o.addSection),g=j(o=>o.selected),m=j(o=>o.device),k=j(o=>o.zoom),[N,a]=z.useState(null),b=o=>{const{active:l,over:y}=o;if(a(null),!y)return;const[W,P]=String(l.id).split(":"),[L,,q]=String(y.id).split(":");let $=Number(q);!P||Number.isNaN($)||W&&L&&s(P,L,$)};function _(o,l){return{...o,...l,margin:{...(o==null?void 0:o.margin)??{},...(l==null?void 0:l.margin)??{}},padding:{...(o==null?void 0:o.padding)??{},...(l==null?void 0:l.padding)??{}}}}function c(o){const l=o==null?void 0:o.margin,y=o==null?void 0:o.padding;return{background:o==null?void 0:o.background,color:o==null?void 0:o.color,borderRadius:o==null?void 0:o.borderRadius,borderColor:o==null?void 0:o.borderColor,borderWidth:o==null?void 0:o.borderWidth,width:o==null?void 0:o.width,maxWidth:o==null?void 0:o.maxWidth,minHeight:o==null?void 0:o.minHeight,textAlign:o==null?void 0:o.textAlign,fontSize:o==null?void 0:o.fontSize,fontWeight:o==null?void 0:o.fontWeight,position:o==null?void 0:o.position,zIndex:o==null?void 0:o.zIndex,top:o==null?void 0:o.top,right:o==null?void 0:o.right,bottom:o==null?void 0:o.bottom,left:o==null?void 0:o.left,marginTop:l==null?void 0:l.top,marginBottom:l==null?void 0:l.bottom,marginLeft:l==null?void 0:l.left,marginRight:l==null?void 0:l.right,paddingTop:y==null?void 0:y.top,paddingBottom:y==null?void 0:y.bottom,paddingLeft:y==null?void 0:y.left,paddingRight:y==null?void 0:y.right}}function C(o){const l=o.flex;return{display:"flex",flexDirection:(l==null?void 0:l.direction)??"column",justifyContent:(l==null?void 0:l.justify)==="center"?"center":(l==null?void 0:l.justify)==="end"?"flex-end":(l==null?void 0:l.justify)==="between"?"space-between":(l==null?void 0:l.justify)==="around"?"space-around":(l==null?void 0:l.justify)==="evenly"?"space-evenly":"flex-start",alignItems:(l==null?void 0:l.align)==="center"?"center":(l==null?void 0:l.align)==="end"?"flex-end":(l==null?void 0:l.align)==="start"?"flex-start":"stretch",flexWrap:(l==null?void 0:l.wrap)??"nowrap",gap:((l==null?void 0:l.gap)??16)+"px"}}return e.jsx("main",{className:`h-full overflow-auto p-6 ${m==="mobile"?"bg-zinc-100":"bg-white"}`,children:(()=>{const o=m==="desktop"?1140:m==="tablet"?820:390;return e.jsx("div",{className:"mx-auto bg-white border rounded shadow-sm",style:{width:`${o*(k||1)}px`,transition:"width 150ms cubic-bezier(0.2, 0.7, 0.2, 1)"},children:i.sections.length===0?e.jsxs("div",{className:"m-6 min-h-[120px] border border-dashed border-zinc-300 rounded flex flex-col items-center justify-center gap-2 text-sm text-zinc-500",onDragOver:l=>{l.dataTransfer.types.includes("application/x-qs-widget")&&l.preventDefault()},onDrop:l=>{var W;const y=l.dataTransfer.getData("application/x-qs-widget");if(y)try{const P=JSON.parse(y);h();const L=j.getState().page.sections,q=(W=L[L.length-1])==null?void 0:W.id;q&&d(q,P.payload)}catch{}},children:[e.jsx(te,{size:22}),e.jsx("div",{children:"גררו ווידג'טים לכאן או הוסיפו מהצד"})]}):e.jsx(ot,{onDragEnd:b,children:i.sections.map(l=>{var y,W,P,L,q;return(W=(y=l.advanced)==null?void 0:y.hiddenOn)!=null&&W[m]?null:e.jsxs("section",{className:`card group relative border border-transparent group-hover:border-zinc-200 ${l.widgets.length===0?"border-0":""} ${(g==null?void 0:g.kind)==="section"&&g.id===l.id?"ring-1 ring-[var(--qs-outline-strong)]":""}`,style:{...c(_(l.style,(P=l.responsiveStyle)==null?void 0:P[m])),marginLeft:"auto",marginRight:"auto"},id:(L=l.advanced)==null?void 0:L.anchorId,onClick:()=>r({kind:"section",id:l.id}),children:[e.jsx("style",{children:((q=l.advanced)==null?void 0:q.customCss)??""}),e.jsx("div",{className:"absolute top-1 left-1 z-20 text-xs text-zinc-500 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition pointer-events-auto",children:e.jsx("span",{className:"chip cursor-pointer select-none",onClick:$=>{$.stopPropagation(),r({kind:"section",id:l.id})},children:"שורה"})}),e.jsxs("div",{className:"e-pill hoverable section-pill",children:[e.jsx("button",{className:"ghost",title:"שכפל",onClick:$=>{$.stopPropagation(),j.getState().duplicateSection(l.id)},children:"⧉"}),e.jsx("button",{title:"גרור",className:"cursor-grab active:cursor-grabbing",onMouseDown:$=>$.stopPropagation(),children:"⋮⋮"}),e.jsx("button",{title:"מחק",onClick:$=>{$.stopPropagation(),j.getState().removeSection(l.id)},children:"✕"})]}),e.jsx(ct,{items:l.widgets.map(($,V)=>`${l.id}:${$.id}:${V}`),strategy:dt,children:e.jsxs("div",{style:C(l),className:`${l.widgets.length===0?"min-h-[80px] border border-dashed border-zinc-300":"border border-transparent"} rounded transition ${l.widgets.length===0?"":"group-hover:border-[var(--qs-outline-strong)] group-hover:border-dashed"}`,onDragOver:$=>{if($.dataTransfer.types.includes("application/x-qs-widget")){$.preventDefault();const V=Array.from($.currentTarget.querySelectorAll("[data-qs-index]"));let v=-1;for(let H=0;H<V.length;H++){const E=V[H].getBoundingClientRect(),A=E.top+E.height/3,Z=E.top+2*E.height/3;if($.clientY>Z)v=H;else if($.clientY>A){v=H-1;break}else{v=H-1;break}}a({sectionId:l.id,afterIndex:v})}},onDrop:$=>{const V=$.dataTransfer.getData("application/x-qs-widget");if(V){try{const v=JSON.parse(V),H=N&&N.sectionId===l.id?N.afterIndex+1:l.widgets.length;p(l.id,v.payload,H)}catch{}a(null)}},onDragLeave:()=>a(null),children:[l.widgets.length===0&&e.jsxs("div",{className:"py-6 text-sm text-zinc-500 flex flex-col items-center justify-center gap-2",children:[e.jsx(te,{size:22}),e.jsx("div",{children:"גררו ווידג'טים לכאן או הוסיפו מהצד"})]}),l.widgets.map(($,V)=>e.jsxs("div",{className:"relative",children:[N&&N.sectionId===l.id&&N.afterIndex===V-1&&V!==0&&e.jsx("div",{className:"h-1.5 bg-[var(--qs-outline-strong)] rounded my-1"}),N&&N.sectionId===l.id&&V===0&&N.afterIndex===-1&&e.jsx("div",{className:"h-1.5 bg-[var(--qs-outline-strong)] rounded my-1"}),e.jsx(Nt,{widget:$,sectionId:l.id,index:V}),N&&N.sectionId===l.id&&V===l.widgets.length-1&&N.afterIndex===V&&e.jsx("div",{className:"h-1.5 bg-[var(--qs-outline-strong)] rounded my-1"})]},$.id))]})})]},l.id)})})})})()})}function ie(){return(ie=Object.assign||function(i){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(i[p]=s[p])}return i}).apply(this,arguments)}function xt(i,r){if(i==null)return{};var s,p,d={},h=Object.keys(i);for(p=0;p<h.length;p++)r.indexOf(s=h[p])>=0||(d[s]=i[s]);return d}function ce(i){var r=z.useRef(i),s=z.useRef(function(p){r.current&&r.current(p)});return r.current=i,s.current}var X=function(i,r,s){return r===void 0&&(r=0),s===void 0&&(s=1),i>s?s:i<r?r:i},ee=function(i){return"touches"in i},de=function(i){return i&&i.ownerDocument.defaultView||self},at=function(i,r,s){var p=i.getBoundingClientRect(),d=ee(r)?function(h,g){for(var m=0;m<h.length;m++)if(h[m].identifier===g)return h[m];return h[0]}(r.touches,s):r;return{left:X((d.pageX-(p.left+de(i).pageXOffset))/p.width),top:X((d.pageY-(p.top+de(i).pageYOffset))/p.height)}},st=function(i){!ee(i)&&i.preventDefault()},pe=T.memo(function(i){var r=i.onMove,s=i.onKey,p=xt(i,["onMove","onKey"]),d=z.useRef(null),h=ce(r),g=ce(s),m=z.useRef(null),k=z.useRef(!1),N=z.useMemo(function(){var c=function(l){st(l),(ee(l)?l.touches.length>0:l.buttons>0)&&d.current?h(at(d.current,l,m.current)):o(!1)},C=function(){return o(!1)};function o(l){var y=k.current,W=de(d.current),P=l?W.addEventListener:W.removeEventListener;P(y?"touchmove":"mousemove",c),P(y?"touchend":"mouseup",C)}return[function(l){var y=l.nativeEvent,W=d.current;if(W&&(st(y),!function(L,q){return q&&!ee(L)}(y,k.current)&&W)){if(ee(y)){k.current=!0;var P=y.changedTouches||[];P.length&&(m.current=P[0].identifier)}W.focus(),h(at(W,y,m.current)),o(!0)}},function(l){var y=l.which||l.keyCode;y<37||y>40||(l.preventDefault(),g({left:y===39?.05:y===37?-.05:0,top:y===40?.05:y===38?-.05:0}))},o]},[g,h]),a=N[0],b=N[1],_=N[2];return z.useEffect(function(){return _},[_]),T.createElement("div",ie({},p,{onTouchStart:a,onMouseDown:a,className:"react-colorful__interactive",ref:d,onKeyDown:b,tabIndex:0,role:"slider"}))}),ae=function(i){return i.filter(Boolean).join(" ")},ge=function(i){var r=i.color,s=i.left,p=i.top,d=p===void 0?.5:p,h=ae(["react-colorful__pointer",i.className]);return T.createElement("div",{className:h,style:{top:100*d+"%",left:100*s+"%"}},T.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:r}}))},J=function(i,r,s){return r===void 0&&(r=0),s===void 0&&(s=Math.pow(10,r)),Math.round(s*i)/s},ft=function(i){var r=i.s,s=i.v,p=i.a,d=(200-r)*s/100;return{h:J(i.h),s:J(d>0&&d<200?r*s/100/(d<=100?d:200-d)*100:0),l:J(d/2),a:J(p,2)}},ue=function(i){var r=ft(i);return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},re=function(i){var r=ft(i);return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+r.a+")"},Yt=function(i){var r=i.h,s=i.s,p=i.v,d=i.a;r=r/360*6,s/=100,p/=100;var h=Math.floor(r),g=p*(1-s),m=p*(1-(r-h)*s),k=p*(1-(1-r+h)*s),N=h%6;return{r:J(255*[p,m,g,g,k,p][N]),g:J(255*[k,p,p,m,g,g][N]),b:J(255*[g,g,k,p,p,m][N]),a:J(d,2)}},Zt=function(i){var r=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(i);return r?Qt({r:Number(r[1])/(r[2]?100/255:1),g:Number(r[3])/(r[4]?100/255:1),b:Number(r[5])/(r[6]?100/255:1),a:r[7]===void 0?1:Number(r[7])/(r[8]?100:1)}):{h:0,s:0,v:0,a:1}},Qt=function(i){var r=i.r,s=i.g,p=i.b,d=i.a,h=Math.max(r,s,p),g=h-Math.min(r,s,p),m=g?h===r?(s-p)/g:h===s?2+(p-r)/g:4+(r-s)/g:0;return{h:J(60*(m<0?m+6:m)),s:J(h?g/h*100:0),v:J(h/255*100),a:d}},Xt=T.memo(function(i){var r=i.hue,s=i.onChange,p=ae(["react-colorful__hue",i.className]);return T.createElement("div",{className:p},T.createElement(pe,{onMove:function(d){s({h:360*d.left})},onKey:function(d){s({h:X(r+360*d.left,0,360)})},"aria-label":"Hue","aria-valuenow":J(r),"aria-valuemax":"360","aria-valuemin":"0"},T.createElement(ge,{className:"react-colorful__hue-pointer",left:r/360,color:ue({h:r,s:100,v:100,a:1})})))}),en=T.memo(function(i){var r=i.hsva,s=i.onChange,p={backgroundColor:ue({h:r.h,s:100,v:100,a:1})};return T.createElement("div",{className:"react-colorful__saturation",style:p},T.createElement(pe,{onMove:function(d){s({s:100*d.left,v:100-100*d.top})},onKey:function(d){s({s:X(r.s+100*d.left,0,100),v:X(r.v-100*d.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+J(r.s)+"%, Brightness "+J(r.v)+"%"},T.createElement(ge,{className:"react-colorful__saturation-pointer",top:1-r.v/100,left:r.s/100,color:ue(r)})))}),tn=function(i,r){if(i===r)return!0;for(var s in i)if(i[s]!==r[s])return!1;return!0},nn=function(i,r){return i.replace(/\s/g,"")===r.replace(/\s/g,"")};function an(i,r,s){var p=ce(s),d=z.useState(function(){return i.toHsva(r)}),h=d[0],g=d[1],m=z.useRef({color:r,hsva:h});z.useEffect(function(){if(!i.equal(r,m.current.color)){var N=i.toHsva(r);m.current={hsva:N,color:r},g(N)}},[r,i]),z.useEffect(function(){var N;tn(h,m.current.hsva)||i.equal(N=i.fromHsva(h),m.current.color)||(m.current={hsva:h,color:N},p(N))},[h,i,p]);var k=z.useCallback(function(N){g(function(a){return Object.assign({},a,N)})},[]);return[h,k]}var sn=typeof window<"u"?z.useLayoutEffect:z.useEffect,rn=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},rt=new Map,ln=function(i){sn(function(){var r=i.current?i.current.ownerDocument:document;if(r!==void 0&&!rt.has(r)){var s=r.createElement("style");s.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,rt.set(r,s);var p=rn();p&&s.setAttribute("nonce",p),r.head.appendChild(s)}},[])},on=function(i){var r=i.className,s=i.hsva,p=i.onChange,d={backgroundImage:"linear-gradient(90deg, "+re(Object.assign({},s,{a:0}))+", "+re(Object.assign({},s,{a:1}))+")"},h=ae(["react-colorful__alpha",r]),g=J(100*s.a);return T.createElement("div",{className:h},T.createElement("div",{className:"react-colorful__alpha-gradient",style:d}),T.createElement(pe,{onMove:function(m){p({a:m.left})},onKey:function(m){p({a:X(s.a+m.left)})},"aria-label":"Alpha","aria-valuetext":g+"%","aria-valuenow":g,"aria-valuemin":"0","aria-valuemax":"100"},T.createElement(ge,{className:"react-colorful__alpha-pointer",left:s.a,color:re(s)})))},cn=function(i){var r=i.className,s=i.colorModel,p=i.color,d=p===void 0?s.defaultColor:p,h=i.onChange,g=xt(i,["className","colorModel","color","onChange"]),m=z.useRef(null);ln(m);var k=an(s,d,h),N=k[0],a=k[1],b=ae(["react-colorful",r]);return T.createElement("div",ie({},g,{ref:m,className:b}),T.createElement(en,{hsva:N,onChange:a}),T.createElement(Xt,{hue:N.h,onChange:a}),T.createElement(on,{hsva:N,onChange:a,className:"react-colorful__last-control"}))},dn={defaultColor:"rgba(0, 0, 0, 1)",toHsva:Zt,fromHsva:function(i){var r=Yt(i);return"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")"},equal:nn},un=function(i){return T.createElement(cn,ie({},i,{colorModel:dn}))};function S({label:i,children:r,helper:s,icon:p}){return e.jsxs("label",{className:"text-sm grid gap-1",children:[e.jsxs("span",{className:"text-[13px] text-zinc-700 dark:text-zinc-300 flex items-center gap-2",children:[p,i]}),r,s&&e.jsx("span",{className:"text-[10px] text-zinc-500",children:s})]})}function U(i){return e.jsx("input",{...i,className:"h-9 rounded-md border px-2 text-xs bg-white/80 dark:bg-zinc-900/80 max-w-full focus:outline-none focus:ring-2 focus:ring-[var(--qs-primary)] focus:border-transparent "+(i.className??"")})}function D(i){return e.jsx(U,{type:"number",inputMode:"numeric",pattern:"[0-9]*",className:`${i.className??""} w-[50px] max-w-[50px] min-w-[50px] placeholder:text-xs`,...i,style:{...i.style||{},width:"50px",maxWidth:"50px"}})}function R(i){return e.jsx("select",{...i,className:"h-9 rounded-md border text-xs bg-white/80 dark:bg-zinc-900/80 focus:outline-none focus:ring-2 focus:ring-[var(--qs-primary)] focus:border-transparent "+(i.className??"")})}function hn(i){const r=i.replace("#","");if(r.length===3){const h=parseInt(r[0]+r[0],16),g=parseInt(r[1]+r[1],16),m=parseInt(r[2]+r[2],16);return`rgba(${h},${g},${m},1)`}const s=parseInt(r.slice(0,2),16),p=parseInt(r.slice(2,4),16),d=parseInt(r.slice(4,6),16);return`rgba(${s},${p},${d},1)`}function mt({value:i,onChange:r}){const[s,p]=z.useState(!1),d=z.useRef(null);z.useEffect(()=>{function k(N){d.current&&(d.current.contains(N.target)||p(!1))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const h=i?i==="transparent"?"rgba(0,0,0,0)":i.startsWith("rgba(")?i:i.startsWith("#")?hn(i):i:"rgba(0,0,0,1)";function g(k){if(!k)return!1;if(k==="transparent")return!0;if(k.startsWith("rgba(")){const N=k.match(/rgba\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)/);if(N)return parseFloat(N[4])===0}return!1}const m=g(i)?{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"10px 10px",backgroundPosition:"0 0, 0 5px, 5px -5px, -5px 0px"}:{background:i??"#000000"};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{ref:d,className:`relative color-field ${s?"open":""}`,children:[e.jsx("button",{type:"button",className:"h-9 w-9 rounded-md border cursor-pointer",style:m,onClick:()=>p(k=>!k)}),e.jsxs("div",{className:"color-popover absolute z-10 mt-2 p-2 bg-white border rounded shadow-md hidden",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-[11px] text-zinc-600",children:"כולל שקיפות"}),e.jsx("button",{className:"text-[11px] underline",onClick:()=>r("rgba(0,0,0,0)"),children:"שקוף"})]}),e.jsx(un,{color:h,onChange:k=>r(k)})]})]}),e.jsx(U,{className:"w-[110px] max-w-[110px] min-w-[110px] placeholder:text-xs",placeholder:"#000000 או rgba()",value:i??"",onChange:k=>r(k.target.value||void 0)})]})}function K({items:i}){const[r,s]=z.useState(()=>new Set(i.filter(d=>d.defaultOpen).map(d=>d.id))),p=d=>{s(h=>{const g=new Set(h);return g.has(d)?g.delete(d):g.add(d),g})};return e.jsx("div",{className:"divide-y rounded-lg border bg-white overflow-hidden",children:i.map(d=>e.jsxs("div",{className:"",children:[e.jsxs("button",{className:"w-full flex items-center justify-between px-3 py-3 text-sm hover:bg-zinc-50",onClick:()=>p(d.id),children:[e.jsx("span",{className:"font-medium text-zinc-800",children:d.title}),e.jsx("span",{className:"text-zinc-500",children:r.has(d.id)?e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M6 8l4 4 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M8 6l4 4-4 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),r.has(d.id)&&e.jsx("div",{className:"p-3",children:d.children})]},d.id))})}function ne({label:i,value:r,onChange:s,icon:p}){return e.jsx(S,{label:i,icon:p,children:e.jsx(mt,{value:r,onChange:s})})}function le({label:i,value:r,onChange:s,icon:p}){return e.jsx(S,{label:i,icon:p,children:e.jsx(D,{className:"w-16 h-8",value:r??"",onChange:d=>s(d.target.value===""?void 0:Number(d.target.value))})})}function lt({widget:i,device:r,onUpdate:s}){var m,k,N,a,b,_;const p=i.style??{},d=((m=i.responsiveStyle)==null?void 0:m[r])??{},h=(c,C)=>{s(o=>{const l={...o.responsiveStyle??{}};l[r]={...l[r]??{},[c]:C},o.responsiveStyle=l})},g={...p,...d};return e.jsx(K,{items:[{id:"style-colors-typography",title:"צבעים וטיפוגרפיה",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3 settings-group",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(ne,{label:"צבע רקע",icon:e.jsx(oe,{size:14}),value:d.background??p.background??"rgba(0,0,0,0)",onChange:c=>h("background",c)}),e.jsx(ne,{label:"צבע טקסט",icon:e.jsx(Q,{size:14}),value:d.color??p.color??"#000000",onChange:c=>h("color",c)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{label:"יישור טקסט",children:e.jsxs(R,{value:d.textAlign??p.textAlign??"right",onChange:c=>h("textAlign",c.target.value),children:[e.jsx("option",{value:"right",children:"ימין"}),e.jsx("option",{value:"center",children:"מרכז"}),e.jsx("option",{value:"left",children:"שמאל"})]})}),e.jsx(S,{label:"משקל",children:e.jsx(R,{value:d.fontWeight??p.fontWeight??400,onChange:c=>h("fontWeight",Number(c.target.value)),children:[100,200,300,400,500,600,700,800,900].map(c=>e.jsx("option",{value:c,children:c},c))})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsx(S,{label:"פונט (Google)",children:e.jsx(R,{value:d.fontFamily??p.fontFamily??"Noto Sans Hebrew",onChange:c=>h("fontFamily",c.target.value),children:["Noto Sans Hebrew","Heebo","Varela Round","Rubik","Assistant","Alef","Arimo","Secular One","Open Sans","Roboto","Inter","Poppins","Montserrat"].map(c=>e.jsx("option",{value:c,children:c},c))})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsx(le,{label:"גודל טקסט",icon:e.jsx(Q,{size:14}),value:d.fontSize??p.fontSize,onChange:c=>h("fontSize",c)}),e.jsx(le,{label:"גובה שורה",icon:e.jsx(ht,{size:14}),value:d.lineHeight??p.lineHeight,onChange:c=>h("lineHeight",c)}),e.jsx(le,{label:"מרווח אותיות",icon:e.jsx(ut,{size:14}),value:d.letterSpacing??p.letterSpacing,onChange:c=>h("letterSpacing",c)})]})]})},{id:"style-spacing",title:"מרווחים (px)",children:e.jsxs("div",{className:"space-y-3 settings-group",children:[e.jsx("div",{className:"settings-subtitle text-[13px]",children:"ריפוד פנימי"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["top","right","bottom","left"].map(c=>e.jsx(S,{label:{top:"עליון",right:"ימין",bottom:"תחתון",left:"שמאל"}[c],icon:{top:e.jsx(Ze,{size:12}),right:e.jsx(Ge,{size:12}),bottom:e.jsx(Ye,{size:12}),left:e.jsx(Ke,{size:12})}[c],children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-20 h-8",value:(()=>{var l,y,W;const C=(l=g.padding)==null?void 0:l[c];if(typeof C=="string")return Number(String(C).replace(/[^0-9.-]/g,""));const o=(W=(y=i.style)==null?void 0:y.padding)==null?void 0:W[c];return typeof o=="string"?Number(String(o).replace(/[^0-9.-]/g,"")):typeof o=="number"?o:i.type==="text"?12:C??0})(),onChange:C=>{var W,P,L,q;const o=C.target.value,l=(W=g.padding)!=null&&W[c]&&typeof((P=g.padding)==null?void 0:P[c])=="string"&&/%|rem|px$/.test(String((L=g.padding)==null?void 0:L[c]))?String((q=g.padding)==null?void 0:q[c]).replace(/^[0-9. -]+/,""):"px",y=o===""?void 0:Number(o);h("padding",{...g.padding??{},[c]:y===void 0?void 0:`${y}${l}`})}}),e.jsxs(R,{className:"text-xs px-0",value:(()=>{var o,l,y;const C=((o=g.padding)==null?void 0:o[c])??((y=(l=i.style)==null?void 0:l.padding)==null?void 0:y[c]);return typeof C=="string"&&C.endsWith("rem")?"rem":typeof C=="string"&&C.endsWith("%")?"%":(typeof C=="number"||i.type==="text","px")})(),onChange:C=>{var W;const o=C.target.value,l=(W=g.padding)==null?void 0:W[c],y=typeof l=="number"?l:Number(String(l??"0").replace(/[^0-9.-]/g,""));h("padding",{...g.padding??{},[c]:`${y}${o}`})},children:[e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"rem",children:"rem"}),e.jsx("option",{value:"%",children:"%"})]})]})},`padding-${c}`))}),e.jsx("div",{className:"settings-subtitle text-[13px]",children:"שוליים"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:["top","right","bottom","left"].map(c=>e.jsx(S,{label:{top:"עליון",right:"ימין",bottom:"תחתון",left:"שמאל"}[c],icon:{top:e.jsx(Ze,{size:12}),right:e.jsx(Ge,{size:12}),bottom:e.jsx(Ye,{size:12}),left:e.jsx(Ke,{size:12})}[c],children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-20 h-8",value:(()=>{var o;const C=(o=g.margin)==null?void 0:o[c];return typeof C=="string"?Number(String(C).replace(/[^0-9.-]/g,"")):C??0})(),onChange:C=>{var W,P,L,q;const o=C.target.value,l=(W=g.margin)!=null&&W[c]&&typeof((P=g.margin)==null?void 0:P[c])=="string"&&/%|rem|px$/.test(String((L=g.margin)==null?void 0:L[c]))?String((q=g.margin)==null?void 0:q[c]).replace(/^[0-9. -]+/,""):"px",y=o===""?void 0:Number(o);h("margin",{...g.margin??{},[c]:y===void 0?void 0:`${y}${l}`})}}),e.jsxs(R,{className:"text-xs px-0",value:(()=>{var o,l,y;const C=((o=g.margin)==null?void 0:o[c])??((y=(l=i.style)==null?void 0:l.margin)==null?void 0:y[c]);return typeof C=="string"&&C.endsWith("rem")?"rem":typeof C=="string"&&C.endsWith("%")?"%":"px"})(),onChange:C=>{var W;const o=C.target.value,l=(W=g.margin)==null?void 0:W[c],y=typeof l=="number"?l:Number(String(l??"0").replace(/[^0-9.-]/g,""));h("margin",{...g.margin??{},[c]:`${y}${o}`})},children:[e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"rem",children:"rem"}),e.jsx("option",{value:"%",children:"%"})]})]})},`margin-${c}`))})]})},{id:"style-shadow",title:"הצללה",children:e.jsxs("div",{className:"space-y-3 settings-group",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsx(S,{label:"כיוון X",children:e.jsx(D,{className:"w-24 h-8",value:((k=g.shadow)==null?void 0:k.x)??0,onChange:c=>h("shadow",{...g.shadow??{},x:c.target.value===""?void 0:Number(c.target.value)})})}),e.jsx(S,{label:"כיוון Y",children:e.jsx(D,{className:"w-24 h-8",value:((N=g.shadow)==null?void 0:N.y)??0,onChange:c=>h("shadow",{...g.shadow??{},y:c.target.value===""?void 0:Number(c.target.value)})})}),e.jsx(S,{label:"טשטוש",children:e.jsx(D,{className:"w-24 h-8",value:((a=g.shadow)==null?void 0:a.blur)??0,onChange:c=>h("shadow",{...g.shadow??{},blur:c.target.value===""?void 0:Number(c.target.value)})})}),e.jsx(S,{label:"התפשטות",children:e.jsx(D,{className:"w-24 h-8",value:((b=g.shadow)==null?void 0:b.spread)??0,onChange:c=>h("shadow",{...g.shadow??{},spread:c.target.value===""?void 0:Number(c.target.value)})})})]}),e.jsx(ne,{label:"צבע הצל",value:(_=g.shadow)==null?void 0:_.color,onChange:c=>h("shadow",{...g.shadow??{},color:c})})]})},{id:"style-border",title:"גבול",children:e.jsxs("div",{className:"space-y-3 settings-group",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[e.jsx(S,{label:"רוחב",children:e.jsx(D,{className:"w-20 h-8",value:g.borderWidth??0,onChange:c=>h("borderWidth",c.target.value===""?void 0:Number(c.target.value))})}),e.jsx(S,{label:"סוג",children:e.jsxs(R,{className:"px-2",value:g.borderStyle??"solid",onChange:c=>h("borderStyle",c.target.value),children:[e.jsx("option",{value:"solid",children:"רצוף"}),e.jsx("option",{value:"dashed",children:"מקווקו"}),e.jsx("option",{value:"dotted",children:"מנוקד"})]})}),e.jsx(S,{label:"רדיוס",children:e.jsx(D,{className:"w-20 h-8",value:g.borderRadius??0,onChange:c=>h("borderRadius",c.target.value===""?void 0:Number(c.target.value))})})]}),e.jsx(ne,{label:"צבע גבול",value:g.borderColor,onChange:c=>h("borderColor",c)})]})}]})}function G({label:i,value:r,onChange:s,icon:p}){return e.jsx(S,{label:i,icon:p,children:e.jsx(D,{className:"w-16 h-8",value:r??"",onChange:d=>s(d.target.value===""?void 0:Number(d.target.value))})})}function pn(i){switch(i){case"heading":return"כותרת";case"text":return"טקסט";case"button":return"כפתור";case"divider":return"קו מפריד";case"spacer":return"ריווח";case"image":return"תמונה";case"video":return"וידאו";case"gallery":return"גלריה";case"banner":return"באנר";case"marquee":return"טקסט נע";case"productSlider":return"סליידר מוצרים";case"html":return"HTML";case"container":return"עמודות";default:return"אלמנט"}}function Y({label:i,value:r,onChange:s,icon:p}){return e.jsx(S,{label:i,icon:p,children:e.jsx(mt,{value:r,onChange:s})})}function gn(){var b,_,c,C,o,l,y,W,P,L,q,$,V,v,H,E,A,Z,xe,fe,me,ve,be,ye,je,Ne,ke,Se,we,Ce,ze,He,Me,We,Ie,_e,Pe,$e,Ee,Le,Oe,Te,qe,Re,Ae,De,Ve,Be,Ue,Je;const i=j(n=>n.selected),r=j(n=>n.page),s=j(n=>n.updateWidget),p=j(n=>n.device);j(n=>n.select);const[d,h]=z.useState("general"),[g,m]=z.useState(null),[k,N]=z.useState([]);z.useMemo(()=>(h("general"),null),[i==null?void 0:i.kind,i==null?void 0:i.id]);const a=z.useMemo(()=>{if((i==null?void 0:i.kind)==="widget")for(const n of r.sections){const t=n.widgets.find(u=>u.id===i.id);if(t)return t;for(const u of n.widgets)if(u.type==="container"&&u.columnsChildren){const x=u.columnsChildren;for(const f of x){const w=f.find(M=>M.id===i.id);if(w)return w}}}},[r.sections,i]);if(!i)return e.jsx("aside",{className:"h-full p-0 overflow-y-auto scrollbar-thin flex flex-col",children:e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-zinc-400",children:[e.jsx(te,{size:36}),e.jsx("div",{className:"text-sm",children:"בחרו אלמנט לעריכה"})]})})});if(i.kind==="section"){const n=r.sections.find(t=>t.id===i.id);return n?e.jsxs("aside",{className:"h-full p-0 overflow-y-auto scrollbar-thin flex flex-col",children:[e.jsx("div",{className:"px-3 py-2 text-center font-semibold bg-zinc-50",children:"הגדרות שורה"}),e.jsx("div",{className:"border-b"}),e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{className:`tab flex-1 h-14 flex flex-col items-center justify-center ${d==="general"?"tab-active":""}`,onClick:()=>h("general"),children:[e.jsx(nt,{size:16}),e.jsx("span",{children:"כללי"})]}),e.jsxs("button",{className:`tab flex-1 h-14 flex flex-col items-center justify-center ${d==="style"?"tab-active":""}`,onClick:()=>h("style"),children:[e.jsx(oe,{size:16}),e.jsx("span",{children:"עיצוב"})]}),e.jsxs("button",{className:`tab flex-1 h-14 flex flex-col items-center justify-center ${d==="advanced"?"tab-active":""}`,onClick:()=>h("advanced"),children:[e.jsx(it,{size:16}),e.jsx("span",{children:"מתקדם"})]})]})}),e.jsx("div",{className:"border-b"}),e.jsxs("div",{className:"p-4",children:[d==="general"&&e.jsxs("div",{className:"space-y-2 mb-4 settings-group",children:[e.jsx("div",{className:"settings-title",children:"פריסת Flex"}),e.jsx(S,{label:"גובה מינימלי",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-20 h-8",value:typeof((b=n.style)==null?void 0:b.minHeight)=="number"?(_=n.style)==null?void 0:_.minHeight:typeof((c=n.style)==null?void 0:c.minHeight)=="string"&&((C=n.style)!=null&&C.minHeight.endsWith("vh"))?Number((o=n.style)==null?void 0:o.minHeight.replace("vh","")):typeof((l=n.style)==null?void 0:l.minHeight)=="string"&&((y=n.style)!=null&&y.minHeight.endsWith("px"))?Number((W=n.style)==null?void 0:W.minHeight.replace("px","")):(P=n.style)==null?void 0:P.minHeight,onChange:t=>{var M;const u=t.target.value,x=(M=n.style)==null?void 0:M.minHeight,f=typeof x=="string"&&x.endsWith("vh")?"vh":"px",w=u===""?void 0:Number(u);j.getState().updateSection(n.id,O=>{O.style={...O.style??{},minHeight:w===void 0?void 0:f==="vh"?`${w}vh`:`${w}px`}})}}),e.jsxs(R,{value:typeof((L=n.style)==null?void 0:L.minHeight)=="string"&&((q=n.style)!=null&&q.minHeight.endsWith("vh"))?"vh":"px",onChange:t=>{var w;const u=t.target.value,x=(w=n.style)==null?void 0:w.minHeight,f=typeof x=="number"?x:typeof x=="string"?Number(x.replace("px","").replace("vh","")):void 0;j.getState().updateSection(n.id,M=>{M.style={...M.style??{},minHeight:f===void 0?void 0:u==="vh"?`${f}vh`:`${f}px`}})},children:[e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"vh",children:"vh"})]})]})}),e.jsx(S,{label:"רוחב קונטיינר",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{value:((($=n.style)==null?void 0:$.maxWidth)??"1140px")==="100%"?"full":"boxed",onChange:t=>{const u=t.target.value;j.getState().updateSection(n.id,x=>{u==="full"?x.style={...x.style??{},maxWidth:"100%"}:x.style={...x.style??{},maxWidth:"1140px"}})},children:[e.jsx("option",{value:"boxed",children:"בוקסד"}),e.jsx("option",{value:"full",children:"רוחב מלא"})]}),e.jsx(U,{className:"w-28",placeholder:"1140px",value:((V=n.style)==null?void 0:V.maxWidth)==="100%"?"":((v=n.style)==null?void 0:v.maxWidth)??"1140px",onChange:t=>{const u=t.target.value;j.getState().updateSection(n.id,x=>{x.style={...x.style??{},maxWidth:u||void 0}})}})]})}),e.jsx(S,{label:"כיוון (Flex Direction)",children:e.jsxs(R,{value:((H=n.flex)==null?void 0:H.direction)??"column",onChange:t=>{const u=t.target.value;j.getState().updateSection(n.id,x=>{x.flex={...x.flex??{},direction:u}})},children:[e.jsx("option",{value:"column",children:"אנכי"}),e.jsx("option",{value:"row",children:"אופקי"})]})}),e.jsx("div",{className:"settings-hr"}),e.jsx(S,{label:"יישור ראשי (Justify)",children:e.jsxs(R,{value:((E=n.flex)==null?void 0:E.justify)??"start",onChange:t=>{const u=t.target.value;j.getState().updateSection(n.id,x=>{var f;x.flex={direction:((f=x.flex)==null?void 0:f.direction)??"row",...x.flex??{},justify:u}})},children:[e.jsx("option",{value:"start",children:"Start"}),e.jsx("option",{value:"center",children:"Center"}),e.jsx("option",{value:"end",children:"End"}),e.jsx("option",{value:"between",children:"Between"}),e.jsx("option",{value:"around",children:"Around"}),e.jsx("option",{value:"evenly",children:"Evenly"})]})}),e.jsx(S,{label:"יישור צולב (Align)",children:e.jsxs(R,{value:((A=n.flex)==null?void 0:A.align)??"stretch",onChange:t=>{const u=t.target.value;j.getState().updateSection(n.id,x=>{var f;x.flex={direction:((f=x.flex)==null?void 0:f.direction)??"row",...x.flex??{},align:u}})},children:[e.jsx("option",{value:"start",children:"Start"}),e.jsx("option",{value:"center",children:"Center"}),e.jsx("option",{value:"end",children:"End"}),e.jsx("option",{value:"stretch",children:"Stretch"})]})}),e.jsx(S,{label:"עטיפה (Wrap)",children:e.jsxs(R,{value:((Z=n.flex)==null?void 0:Z.wrap)??"nowrap",onChange:t=>{const u=t.target.value;j.getState().updateSection(n.id,x=>{var f;x.flex={direction:((f=x.flex)==null?void 0:f.direction)??"row",...x.flex??{},wrap:u}})},children:[e.jsx("option",{value:"nowrap",children:"ללא"}),e.jsx("option",{value:"wrap",children:"עטיפה"})]})}),e.jsx(S,{label:"ריווח (gap)",children:e.jsx(D,{value:((xe=n.flex)==null?void 0:xe.gap)??16,onChange:t=>{const u=Number(t.target.value);j.getState().updateSection(n.id,x=>{var f;x.flex={direction:((f=x.flex)==null?void 0:f.direction)??"row",...x.flex??{},gap:u}})}})})]}),d==="style"&&e.jsxs("div",{className:"space-y-2 settings-group",children:[e.jsx("div",{className:"settings-title",children:"צבעים ומרווחים"}),e.jsx(Y,{label:"צבע רקע",value:(fe=n.style)==null?void 0:fe.background,onChange:t=>j.getState().updateSection(n.id,u=>{u.style={...u.style??{},background:t}})}),e.jsx(G,{label:"פדינג עליון",value:(ve=(me=n.style)==null?void 0:me.padding)==null?void 0:ve.top,onChange:t=>{j.getState().updateSection(n.id,u=>{var x;u.style={...u.style??{},padding:{...((x=u.style)==null?void 0:x.padding)??{},top:t}}})}}),e.jsx(G,{label:"פדינג תחתון",value:(ye=(be=n.style)==null?void 0:be.padding)==null?void 0:ye.bottom,onChange:t=>{j.getState().updateSection(n.id,u=>{var x;u.style={...u.style??{},padding:{...((x=u.style)==null?void 0:x.padding)??{},bottom:t}}})}})]}),d==="advanced"&&e.jsxs("div",{className:"space-y-3 settings-group",children:[e.jsx("div",{className:"settings-title",children:"נראות"}),e.jsx("div",{className:"flex gap-3",children:[{device:"desktop",label:"דסקטופ"},{device:"tablet",label:"טאבלט"},{device:"mobile",label:"מובייל"}].map(({device:t,label:u})=>{var x,f,w,M;return e.jsxs("button",{className:`flex flex-col items-center gap-1 p-2 rounded ${(f=(x=n.advanced)==null?void 0:x.hiddenOn)!=null&&f[t]?"bg-zinc-200":"hover:bg-zinc-100"}`,onClick:()=>j.getState().updateSection(n.id,O=>{var F;const B={...((F=O.advanced)==null?void 0:F.hiddenOn)??{}};B[t]=!B[t],O.advanced={...O.advanced??{},hiddenOn:B}}),children:[(M=(w=n.advanced)==null?void 0:w.hiddenOn)!=null&&M[t]?e.jsx(Qe,{size:18}):e.jsx(Xe,{size:18}),e.jsx("span",{className:"text-[10px]",children:u})]},t)})}),e.jsx("div",{className:"settings-hr"}),e.jsx(S,{label:"עוגן (ID)",children:e.jsx(U,{placeholder:"my-section",value:((je=n.advanced)==null?void 0:je.anchorId)??"",onChange:t=>j.getState().updateSection(n.id,u=>{u.advanced={...u.advanced??{},anchorId:t.target.value||void 0}})})}),e.jsx(S,{label:"Z-Index (שכבתיות)",children:e.jsx(D,{value:((Ne=n.style)==null?void 0:Ne.zIndex)??"",onChange:t=>j.getState().updateSection(n.id,u=>{const x=t.target.value;u.style={...u.style??{},zIndex:x===""?void 0:Number(x)}})})}),e.jsx(S,{label:"מיקום (Position)",children:e.jsxs(R,{value:((ke=n.style)==null?void 0:ke.position)??"static",onChange:t=>j.getState().updateSection(n.id,u=>{u.style={...u.style??{},position:t.target.value}}),children:[e.jsx("option",{value:"static",children:"סטטי (static)"}),e.jsx("option",{value:"relative",children:"יחסי (relative)"}),e.jsx("option",{value:"absolute",children:"מוחלט (absolute)"})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"top",label:"עליון"},{key:"right",label:"ימין"},{key:"bottom",label:"תחתון"},{key:"left",label:"שמאל"}].map(({key:t,label:u})=>{var x;return e.jsx(S,{label:u,children:e.jsx(D,{value:((x=n.style)==null?void 0:x[t])??"",onChange:f=>j.getState().updateSection(n.id,w=>{const M=f.target.value;w.style={...w.style??{},[t]:M===""?void 0:Number(M)}})})},t)})}),e.jsx("div",{className:"settings-hr"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{group:"margin",title:"שוליים (Margin)"},{group:"padding",title:"ריווח פנימי (Padding)"}].map(({group:t,title:u})=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:u}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"top",label:"עליון"},{key:"bottom",label:"תחתון"},{key:"left",label:"שמאל"},{key:"right",label:"ימין"}].map(({key:x,label:f})=>{var w,M;return e.jsx(S,{label:f,children:e.jsx(D,{value:((M=(w=n.style)==null?void 0:w[t])==null?void 0:M[x])??"",onChange:O=>j.getState().updateSection(n.id,B=>{var Fe;const F=O.target.value,vt=((Fe=B.style)==null?void 0:Fe[t])??{};B.style={...B.style??{},[t]:{...vt,[x]:F===""?void 0:Number(F)}}})})},x)})})]},t))}),e.jsx(S,{label:"CSS מותאם",children:e.jsx("textarea",{className:"border rounded px-2 py-1 min-h-[120px] font-mono",placeholder:".my-class { color: red }",value:((Se=n.advanced)==null?void 0:Se.customCss)??"",onChange:t=>j.getState().updateSection(n.id,u=>{u.advanced={...u.advanced??{},customCss:t.target.value||void 0}})})})]})]})]}):e.jsx("aside",{className:"border-l bg-white dark:bg-zinc-950 p-4"})}return a?e.jsxs("aside",{className:"h-full p-0 overflow-y-auto scrollbar-thin flex flex-col",children:[e.jsx("div",{className:"px-3 py-2 text-center font-semibold",children:a?`עריכת ${pn(a.type)}`:""}),e.jsx("div",{className:"border-b"}),e.jsx("div",{children:e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{className:`tab flex-1 h-14 flex flex-col items-center justify-center ${d==="general"?"tab-active":""}`,onClick:()=>h("general"),children:[e.jsx(nt,{size:16}),e.jsx("span",{children:"כללי"})]}),e.jsxs("button",{className:`tab flex-1 h-14 flex flex-col items-center justify-center ${d==="style"?"tab-active":""}`,onClick:()=>h("style"),children:[e.jsx(oe,{size:16}),e.jsx("span",{children:"עיצוב"})]}),e.jsxs("button",{className:`tab flex-1 h-14 flex flex-col items-center justify-center ${d==="advanced"?"tab-active":""}`,onClick:()=>h("advanced"),children:[e.jsx(it,{size:16}),e.jsx("span",{children:"מתקדם"})]})]})}),e.jsxs("div",{className:"p-4",children:[d==="general"&&a.type==="heading"&&e.jsx(K,{items:[{id:"heading-content",title:"כותרת",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{label:"טקסט",icon:e.jsx(Q,{size:14}),children:e.jsx(U,{value:a.type==="heading"?a.content??"":"",onChange:n=>s(a.id,t=>{t.type==="heading"&&(t.content=n.target.value)})})}),e.jsx(S,{label:"דרגת הכותרת (H)",helper:"קובע את תגית ה-HTML",icon:e.jsx(Q,{size:14}),children:e.jsx(R,{value:a.type==="heading"?a.tag:"h2",onChange:n=>s(a.id,t=>{t.type==="heading"&&(t.tag=n.target.value)}),children:["h1","h2","h3","h4","h5","h6"].map(n=>e.jsx("option",{value:n,children:n.toUpperCase()},n))})}),e.jsx(S,{label:"קישור (לא חובה)",icon:e.jsx(tt,{size:14}),children:e.jsx(U,{placeholder:"https://example.com",value:a.type==="heading"?a.href??"":"",onChange:n=>s(a.id,t=>{t.type==="heading"&&(t.href=n.target.value||void 0)})})})]})}]}),d==="general"&&a.type==="text"&&e.jsx(K,{items:[{id:"text-content",title:"טקסט",defaultOpen:!0,children:e.jsx(S,{label:"טקסט",icon:e.jsx(Q,{size:14}),children:e.jsx("textarea",{className:"h-28 rounded-md border px-3 py-2 text-sm bg-white/80 dark:bg-zinc-900/80 focus:outline-none focus:ring-2 focus:ring-[var(--qs-primary)] focus:border-transparent",value:a.type==="text"?a.content??"":"",onChange:n=>s(a.id,t=>{t.type==="text"&&(t.content=n.target.value)})})})}]}),d==="general"&&a.type==="button"&&e.jsx(K,{items:[{id:"button-content",title:"כפתור",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{label:"תווית",icon:e.jsx(Q,{size:14}),children:e.jsx(U,{value:a.type==="button"?a.label??"":"",onChange:n=>s(a.id,t=>{t.type==="button"&&(t.label=n.target.value)})})}),e.jsx(S,{label:"קישור",icon:e.jsx(tt,{size:14}),children:e.jsx(U,{value:a.type==="button"?a.href??"":"",onChange:n=>s(a.id,t=>{t.type==="button"&&(t.href=n.target.value||void 0)})})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsx(S,{label:"רוחב",children:e.jsxs(R,{value:((we=a.style)==null?void 0:we.width)==="100%"?"full":"auto",onChange:n=>s(a.id,t=>{t.type==="button"&&(t.style={...t.style??{},width:n.target.value==="full"?"100%":void 0})}),children:[e.jsx("option",{value:"auto",children:"רגיל"}),e.jsx("option",{value:"full",children:"רוחב מלא"})]})})}),e.jsxs("div",{className:"settings-group space-y-2",children:[e.jsx("div",{className:"settings-title",children:"פדינג"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["top","right","bottom","left"].map(n=>{var t,u;return e.jsx(S,{label:{top:"עליון",right:"ימין",bottom:"תחתון",left:"שמאל"}[n],children:e.jsx(D,{value:((u=(t=a.style)==null?void 0:t.padding)==null?void 0:u[n])??"",onChange:x=>s(a.id,f=>{var w;f.type==="button"&&(f.style={...f.style??{},padding:{...((w=f.style)==null?void 0:w.padding)??{},[n]:x.target.value===""?void 0:Number(x.target.value)}})})})},`btn-pad-${n}`)})})]})]})}]}),d==="general"&&a.type==="image"&&e.jsx(K,{items:[{id:"image-content",title:"תמונה",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{label:"מקור תמונה",children:e.jsx(U,{value:a.type==="image"?a.src??"":"",onChange:n=>s(a.id,t=>{t.type==="image"&&(t.src=n.target.value)})})}),e.jsx(S,{label:"טקסט חלופי (alt)",children:e.jsx(U,{value:a.type==="image"?a.alt??"":"",onChange:n=>s(a.id,t=>{t.type==="image"&&(t.alt=n.target.value||void 0)})})}),e.jsx(S,{label:"קישור (לא חובה)",children:e.jsx(U,{value:a.type==="image"?a.linkHref??"":"",onChange:n=>s(a.id,t=>{t.type==="image"&&(t.linkHref=n.target.value||void 0)})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{label:"רוחב תמונה",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-20 h-8",value:(()=>{var t,u,x;const n=((u=(t=a.responsiveStyle)==null?void 0:t[p])==null?void 0:u.width)??((x=a.style)==null?void 0:x.width);return typeof n=="string"?Number(String(n).replace(/[^0-9.-]/g,"")):""})(),onChange:n=>{var w,M,O;const t=n.target.value,u=((M=(w=a.responsiveStyle)==null?void 0:w[p])==null?void 0:M.width)??((O=a.style)==null?void 0:O.width),x=typeof u=="string"&&u.endsWith("%")?"%":"px",f=t===""?void 0:Number(t);s(a.id,B=>{const F={...B.responsiveStyle??{}};F[p]={...F[p]??{},width:f===void 0?void 0:`${f}${x}`},B.responsiveStyle=F})}}),e.jsxs(R,{className:"text-xs px-0",value:(()=>{var t,u,x;const n=((u=(t=a.responsiveStyle)==null?void 0:t[p])==null?void 0:u.width)??((x=a.style)==null?void 0:x.width);return typeof n=="string"&&n.endsWith("%")?"%":"px"})(),onChange:n=>{var f,w,M;const t=n.target.value,u=((w=(f=a.responsiveStyle)==null?void 0:f[p])==null?void 0:w.width)??((M=a.style)==null?void 0:M.width),x=typeof u=="number"?u:Number(String(u??"0").replace(/[^0-9.-]/g,""));s(a.id,O=>{const B={...O.responsiveStyle??{}};B[p]={...B[p]??{},width:`${x}${t}`},O.responsiveStyle=B})},children:[e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"})]})]})}),e.jsx(S,{label:"Object Fit",children:e.jsxs(R,{value:a.type==="image"?a.objectFit??"cover":"cover",onChange:n=>s(a.id,t=>{t.type==="image"&&(t.objectFit=n.target.value)}),children:[e.jsx("option",{value:"cover",children:"Cover"}),e.jsx("option",{value:"contain",children:"Contain"})]})})]})]})}]}),d==="general"&&a.type==="spacer"&&e.jsx(K,{items:[{id:"spacer-general",title:"ריווח",defaultOpen:!0,children:e.jsx("div",{className:"space-y-2",children:e.jsx(S,{label:"גובה (Height)",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-20 h-8",value:(()=>{const n=a.height;return typeof n=="string"?Number(String(n).replace(/[^0-9.-]/g,"")):n??0})(),onChange:n=>{const t=n.target.value,u=a.height,x=typeof u=="string"&&String(u).endsWith("vh")?"vh":"px",f=t===""?void 0:Number(t);s(a.id,w=>{w.type==="spacer"&&(w.height=f===void 0?0:`${f}${x}`)})}}),e.jsxs(R,{className:"text-xs px-0",value:typeof a.height=="string"&&String(a.height).endsWith("vh")?"vh":"px",onChange:n=>{const t=n.target.value,u=a.height,x=typeof u=="number"?u:Number(String(u??"0").replace(/[^0-9.-]/g,""));s(a.id,f=>{f.type==="spacer"&&(f.height=`${x}${t}`)})},children:[e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"vh",children:"vh"})]})]})})})}]}),d==="general"&&a.type==="banner"&&e.jsx(K,{items:[{id:"banner-content-text",title:"תוכן",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{label:"כותרת",children:e.jsx(U,{value:a.heading??"",placeholder:"כותרת הבאנר",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.heading=n.target.value||void 0)})})}),e.jsx(S,{label:"תוכן",children:e.jsx(U,{value:a.text??"",placeholder:"טקסט הבאנר",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.text=n.target.value||void 0)})})}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(S,{label:"כפתור - תווית",children:e.jsx(U,{value:a.ctaLabel??"",placeholder:"טקסט הכפתור",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.ctaLabel=n.target.value||void 0)})})}),e.jsx(S,{label:"כפתור - קישור",children:e.jsx(U,{value:a.ctaHref??"",placeholder:"https://...",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.ctaHref=n.target.value||void 0)})})})]})]})},{id:"banner-size",title:"גובה",children:e.jsx(S,{label:"גובה באנר",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-20 h-8",value:(()=>{var t;const n=(t=a.style)==null?void 0:t.minHeight;return typeof n=="string"?Number(String(n).replace(/[^0-9.-]/g,"")):n??""})(),onChange:n=>{var w;const t=n.target.value,u=(w=a.style)==null?void 0:w.minHeight,x=typeof u=="string"&&String(u).endsWith("vh")?"vh":"px",f=t===""?void 0:Number(t);s(a.id,M=>{M.type==="banner"&&(M.style={...M.style??{},minHeight:f===void 0?void 0:`${f}${x}`})})}}),e.jsxs(R,{className:"text-xs px-0",value:typeof((Ce=a.style)==null?void 0:Ce.minHeight)=="string"&&String((ze=a.style)==null?void 0:ze.minHeight).endsWith("vh")?"vh":"px",onChange:n=>{var f;const t=n.target.value,u=(f=a.style)==null?void 0:f.minHeight,x=typeof u=="number"?u:Number(String(u??"0").replace(/[^0-9.-]/g,""));s(a.id,w=>{w.type==="banner"&&(w.style={...w.style??{},minHeight:`${x}${t}`})})},children:[e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"vh",children:"vh"})]})]})})},{id:"banner-position",title:"מיקום",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{label:"יישור אופקי",children:e.jsxs(R,{value:((He=a.contentPosition)==null?void 0:He.horizontal)??"center",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.contentPosition={...t.contentPosition??{vertical:"center",horizontal:"center"},horizontal:n.target.value})}),children:[e.jsx("option",{value:"start",children:"שמאל"}),e.jsx("option",{value:"center",children:"מרכז"}),e.jsx("option",{value:"end",children:"ימין"})]})}),e.jsx(S,{label:"יישור אנכי",children:e.jsxs(R,{value:((Me=a.contentPosition)==null?void 0:Me.vertical)??"center",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.contentPosition={...t.contentPosition??{vertical:"center",horizontal:"center"},vertical:n.target.value})}),children:[e.jsx("option",{value:"start",children:"למעלה"}),e.jsx("option",{value:"center",children:"מרכז"}),e.jsx("option",{value:"end",children:"למטה"})]})})]})},{id:"banner-media",title:"מדיה",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-zinc-600",children:"תמונת רקע"}),e.jsx("div",{className:"border border-dashed rounded-lg p-4 text-sm text-zinc-500 hover:bg-zinc-50 cursor-pointer flex items-center justify-center gap-2",onClick:()=>m({kind:"image",widgetId:a.id}),children:e.jsx("span",{children:"לחצו לבחירה / גררו תמונה להעלאה"})}),a.type==="banner"&&a.backgroundImage&&e.jsxs("div",{className:"text-xs text-zinc-500 break-all",children:["נוכחית: ",a.backgroundImage]})]}),e.jsx(S,{label:"וידאו (MP4) - כתובת URL",children:e.jsx(U,{placeholder:"https://.../video.mp4",value:a.type==="banner"?a.backgroundVideoUrl??"":"",onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.backgroundVideoUrl=n.target.value||void 0)})})}),e.jsx("div",{className:"text-xs text-zinc-500",children:"אם מולא וידאו, הוא יוצג במקום תמונת הרקע."})]})}]}),d==="general"&&a.type==="container"&&e.jsx(K,{items:[{id:"columns-general",title:"עמודות",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{label:"מספר עמודות",children:e.jsx(D,{value:a.columns??2,onChange:n=>{const t=Number(n.target.value||0);s(a.id,u=>{if(u.type==="container"){const x=Math.max(1,Math.min(6,t||1)),f=u.columns??2,w=u.columnsChildren??Array.from({length:f},()=>[]),M=Array.from({length:x},(O,B)=>w[B]??[]);u.columns=x,u.columnsChildren=M}})}})}),e.jsx(S,{label:"Gap בין העמודות (px)",children:e.jsx(D,{value:((We=a.flex)==null?void 0:We.gap)??16,onChange:n=>{const t=Number(n.target.value);s(a.id,u=>{u.type==="container"&&(u.flex={...u.flex??{direction:"row"},gap:t})})}})})]})}]}),d==="style"&&a.type!=="banner"&&e.jsx(lt,{widget:a,device:p,onUpdate:n=>s(a.id,n)}),d==="style"&&a.type==="banner"&&e.jsx(K,{items:[{id:"banner-style-base",title:"עיצוב כללי",defaultOpen:!0,children:e.jsx(lt,{widget:a,device:p,onUpdate:n=>s(a.id,n)})},{id:"banner-style-typography",title:"טיפוגרפיה",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(G,{label:"H גודל",value:(Ie=a.headingStyle)==null?void 0:Ie.fontSize,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.headingStyle={...t.headingStyle??{},fontSize:n})})}),e.jsx(G,{label:"H משקל",value:(_e=a.headingStyle)==null?void 0:_e.fontWeight,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.headingStyle={...t.headingStyle??{},fontWeight:n})})}),e.jsx(Y,{label:"H צבע",value:(Pe=a.headingStyle)==null?void 0:Pe.color,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.headingStyle={...t.headingStyle??{},color:n})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(G,{label:"טקסט גודל",value:($e=a.textStyle)==null?void 0:$e.fontSize,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.textStyle={...t.textStyle??{},fontSize:n})})}),e.jsx(G,{label:"טקסט משקל",value:(Ee=a.textStyle)==null?void 0:Ee.fontWeight,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.textStyle={...t.textStyle??{},fontWeight:n})})}),e.jsx(Y,{label:"טקסט צבע",value:(Le=a.textStyle)==null?void 0:Le.color,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.textStyle={...t.textStyle??{},color:n})})})]})]})},{id:"banner-style-colors",title:"צבעים וכפתור",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Y,{label:"Overlay (החשכה)",value:a.overlayColor,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.overlayColor=n)})}),e.jsx(G,{label:"שקיפות (0-1)",value:Number(String(((Te=(Oe=a.overlayColor)==null?void 0:Oe.match(/rgba\(0,0,0,(.*)\)/))==null?void 0:Te[1])??"0.6")),onChange:n=>s(a.id,t=>{if(t.type==="banner"){const u=typeof n=="number"?n:.6;t.overlayColor=`rgba(0,0,0,${u})`}})})]}),e.jsx(Y,{label:"כפתור רקע",value:(qe=a.buttonStyle)==null?void 0:qe.background,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.buttonStyle={...t.buttonStyle??{},background:n})})}),e.jsx(Y,{label:"כפתור טקסט",value:(Re=a.buttonStyle)==null?void 0:Re.color,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.buttonStyle={...t.buttonStyle??{},color:n})})}),e.jsx(Y,{label:"Hover רקע",value:(Ae=a.buttonHoverStyle)==null?void 0:Ae.background,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.buttonHoverStyle={...t.buttonHoverStyle??{},background:n})})}),e.jsx(Y,{label:"Hover טקסט",value:(De=a.buttonHoverStyle)==null?void 0:De.color,onChange:n=>s(a.id,t=>{t.type==="banner"&&(t.buttonHoverStyle={...t.buttonHoverStyle??{},color:n})})})]})}]}),d==="advanced"&&a&&e.jsxs("div",{className:"space-y-3 settings-group",children:[e.jsx("div",{className:"settings-title",children:"מתקדם"}),e.jsxs("label",{className:"text-sm grid grid-cols-1 gap-1",children:["עוגן (ID)",e.jsx("input",{className:"border rounded px-2 py-1",value:((Ve=a.advanced)==null?void 0:Ve.anchorId)??"",onChange:n=>s(a.id,t=>{t.advanced={...t.advanced??{},anchorId:n.target.value||void 0}})})]}),e.jsxs("div",{className:"text-sm",children:["נראות:",e.jsx("div",{className:"mt-1 flex gap-4",children:[{key:"desktop",label:"דסקטופ"},{key:"tablet",label:"טאבלט"},{key:"mobile",label:"מובייל"}].map(({key:n,label:t})=>{var x,f;const u=!!((f=(x=a.advanced)==null?void 0:x.hiddenOn)!=null&&f[n]);return e.jsxs("button",{className:`inline-flex items-center gap-1 px-2 py-1 rounded hover:bg-zinc-100 ${u?"text-zinc-500":"text-zinc-900"}`,onClick:()=>s(a.id,w=>{var O;const M={...((O=w.advanced)==null?void 0:O.hiddenOn)??{}};M[n]=!u,w.advanced={...w.advanced??{},hiddenOn:M}}),title:`${u?"מוצג":"מוסתר"} ב${t}`,children:[u?e.jsx(Qe,{size:16}):e.jsx(Xe,{size:16}),e.jsx("span",{children:t})]},n)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(G,{label:"Z-Index",value:(Be=a.style)==null?void 0:Be.zIndex,onChange:n=>s(a.id,t=>{t.style={...t.style??{},zIndex:n}})}),e.jsx(S,{label:"Position",children:e.jsxs(R,{value:((Ue=a.style)==null?void 0:Ue.position)??"static",onChange:n=>s(a.id,t=>{t.style={...t.style??{},position:n.target.value}}),children:[e.jsx("option",{value:"static",children:"Static"}),e.jsx("option",{value:"relative",children:"Relative"}),e.jsx("option",{value:"absolute",children:"Absolute"})]})})]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"היסטים (Offsets)"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{key:"top",label:"עליון"},{key:"bottom",label:"תחתון"},{key:"right",label:"ימין"},{key:"left",label:"שמאל"}].map(({key:n,label:t})=>{var u;return e.jsxs("div",{className:"text-center",children:[e.jsx("input",{type:"number",className:"w-16 h-8 rounded border px-1 text-xs",value:((u=a.style)==null?void 0:u[n])??"",onChange:x=>{const f=x.target.value===""?void 0:Number(x.target.value);s(a.id,w=>{w.style={...w.style??{},[n]:f}})}}),e.jsx("div",{className:"text-[10px] text-zinc-500 mt-1",children:t})]},n)})})]}),e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"מרגין"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{key:"top",label:"עליון"},{key:"bottom",label:"תחתון"},{key:"right",label:"ימין"},{key:"left",label:"שמאל"}].map(({key:n,label:t})=>{var u,x;return e.jsxs("div",{className:"text-center",children:[e.jsx("input",{type:"number",className:"w-16 h-8 rounded border px-1 text-xs",value:((x=(u=a.style)==null?void 0:u.margin)==null?void 0:x[n])??"",onChange:f=>{const w=f.target.value===""?void 0:Number(f.target.value);s(a.id,M=>{var O;M.style={...M.style??{},margin:{...((O=M.style)==null?void 0:O.margin)??{},[n]:w}}})}}),e.jsx("div",{className:"text-[10px] text-zinc-500 mt-1",children:t})]},n)})})]}),e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"פדינג"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{key:"top",label:"עליון"},{key:"bottom",label:"תחתון"},{key:"right",label:"ימין"},{key:"left",label:"שמאל"}].map(({key:n,label:t})=>{var u,x;return e.jsxs("div",{className:"text-center",children:[e.jsx("input",{type:"number",className:"w-16 h-8 rounded border px-1 text-xs",value:((x=(u=a.style)==null?void 0:u.padding)==null?void 0:x[n])??"",onChange:f=>{const w=f.target.value===""?void 0:Number(f.target.value);s(a.id,M=>{var O;M.style={...M.style??{},padding:{...((O=M.style)==null?void 0:O.padding)??{},[n]:w}}})}}),e.jsx("div",{className:"text-[10px] text-zinc-500 mt-1",children:t})]},n)})})]}),e.jsxs("label",{className:"text-sm grid grid-cols-1 gap-1 mt-3",children:["CSS מותאם",e.jsx("textarea",{className:"border rounded px-2 py-1 min-h-[120px] font-mono",placeholder:".my-class { color: red }",value:((Je=a.advanced)==null?void 0:Je.customCss)??"",onChange:n=>s(a.id,t=>{t.advanced={...t.advanced??{},customCss:n.target.value||void 0}})})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>m(null),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl border w-[620px] p-5",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"text-sm font-semibold mb-3",children:["ספריית מדיה · ",g.kind==="image"?"תמונות":"וידאו (MP4)"," "]}),e.jsx("div",{className:"mb-4 border-2 border-dashed rounded-xl p-8 text-center text-sm text-zinc-600 bg-zinc-50 hover:bg-zinc-100 transition-colors cursor-pointer",onDragOver:n=>{n.preventDefault()},onDrop:n=>{var x;n.preventDefault();const t=(x=n.dataTransfer.files)==null?void 0:x[0];if(!t)return;const u=URL.createObjectURL(t);N(f=>[{kind:g.kind,url:u},...f]),s(g.widgetId,f=>{f.type==="banner"&&(g.kind==="image"?f.backgroundImage=u:f.backgroundVideoUrl=u)}),m(null)},onClick:n=>{const t=n.currentTarget.querySelector('input[type="file"]');t==null||t.click()},children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white border flex items-center justify-center text-[var(--qs-outline-strong)]",children:e.jsx(Ct,{size:22})}),e.jsx("div",{className:"text-sm font-medium",children:"גררו לכאן להעלאה או לחצו לבחירת קובץ"}),e.jsx("div",{className:"text-[11px] text-zinc-500",children:g.kind==="image"?"תמונות (JPG, PNG, WEBP)":"וידאו MP4"}),e.jsx("input",{type:"file",className:"hidden",accept:g.kind==="image"?"image/*":"video/mp4",onChange:n=>{var x;const t=(x=n.target.files)==null?void 0:x[0];if(!t)return;const u=URL.createObjectURL(t);N(f=>[{kind:g.kind,url:u},...f]),s(g.widgetId,f=>{f.type==="banner"&&(g.kind==="image"?f.backgroundImage=u:f.backgroundVideoUrl=u)}),m(null)}})]})}),e.jsxs("div",{className:"max-h-72 overflow-y-auto grid grid-cols-3 gap-2",children:[k.filter(n=>n.kind===g.kind).map((n,t)=>e.jsx("button",{className:"border rounded p-1 hover:ring",onClick:()=>{s(g.widgetId,u=>{u.type==="banner"&&(g.kind==="image"?u.backgroundImage=n.url:u.backgroundVideoUrl=n.url)}),m(null)},children:g.kind==="image"?e.jsx("img",{src:n.url,className:"w-full h-20 object-cover rounded"}):e.jsx("video",{src:n.url,className:"w-full h-20 object-cover rounded"})},t)),k.filter(n=>n.kind===g.kind).length===0&&e.jsx("div",{className:"col-span-3 text-sm text-zinc-500 text-center py-6",children:"אין קבצים שמורים עדיין"})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{className:"btn btn-ghost",onClick:()=>m(null),children:"סגור"})})]})})]})]}):e.jsx("aside",{className:"h-full p-0 overflow-y-auto scrollbar-thin flex flex-col",children:e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-zinc-400",children:[e.jsx(te,{size:36}),e.jsx("div",{className:"text-sm",children:"בחרו אלמנט לעריכה"})]})})})}function xn(){const i=j(v=>v.device),r=j(v=>v.setDevice),s=j(v=>v.exportPage),p=j(v=>v.undo),d=j(v=>v.redo),h=j(v=>v.importPage);j(v=>v.selected);const g=j(v=>v.zoom),m=j(v=>v.setZoom),k=j(v=>v.setServerMeta),[N,a]=z.useState(!1),[b,_]=z.useState(!1),[c,C]=z.useState(!1),o=j(v=>v.page),l=j(v=>v.storeSlug),y=j(v=>v.etag),W=()=>{const v=JSON.stringify(s(),null,2),H=new Blob([v],{type:"application/json"}),E=URL.createObjectURL(H),A=document.createElement("a");A.href=E,A.download="page.json",A.click(),URL.revokeObjectURL(E)},P=z.useMemo(()=>l?`quickshop:builder:draft:${l}`:"QS_PREVIEW_PAGE",[l]),L=z.useCallback(async(v="draft")=>{if(!l)return;const H={};y&&(H["If-None-Match"]=y);const E=await fetch(`/api/stores/${l}/home?mode=${v}`,{credentials:"include",headers:H});if(E.status===304)return;const A=await E.json().catch(()=>({}));if(!E.ok)throw new Error(A.error||"Load failed");const Z=Array.isArray(A.components)?A.components:[];h({...o,sections:Z}),k({etag:A.etag,updatedAt:A.updatedAt,isPublished:A.isPublished});try{localStorage.setItem(P,JSON.stringify({page:{...o,sections:Z}}))}catch{}},[l,y,h,o,k,P]),q=z.useCallback(async()=>{if(l){_(!0);try{const v=await fetch(`/api/stores/${l}/home`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({components:o.sections,mode:"draft"})}),H=await v.json().catch(()=>({}));if(!v.ok||!H.success)throw new Error(H.error||"Save failed");const E=Array.isArray(H.components)?H.components:[];h({...o,sections:E}),k({etag:H.etag,updatedAt:H.updatedAt,isPublished:H.isPublished});try{localStorage.setItem(P,JSON.stringify({page:{...o,sections:E}}))}catch{}await L("draft"),console.info("נשמר בהצלחה")}catch(v){console.error(v)}finally{_(!1)}}},[l,o,h,k,L,P]),$=z.useCallback(async()=>{if(l){C(!0);try{const v=await fetch(`/api/stores/${l}/home`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({components:o.sections,mode:"publish"})}),H=await v.json().catch(()=>({}));if(!v.ok||!H.success)throw new Error(H.error||"Publish failed");const E=Array.isArray(H.components)?H.components:[];h({...o,sections:E}),k({etag:H.etag,updatedAt:H.updatedAt,isPublished:H.isPublished});try{localStorage.setItem(P,JSON.stringify({page:{...o,sections:E}}))}catch{}await L("draft"),console.info("פורסם בהצלחה")}catch(v){console.error(v)}finally{C(!1)}}},[l,o,h,k,L,P]),V=z.useRef(!1);return z.useEffect(()=>{!V.current&&l&&(V.current=!0,L("draft").catch(()=>{}))},[l,L]),z.useEffect(()=>{const v=H=>{var A;const E=(A=H.detail)==null?void 0:A.action;E==="openTemplates"&&a(!0),E==="save"&&q(),E==="publish"&&$()};return window.addEventListener("qs:toolbar",v),()=>window.removeEventListener("qs:toolbar",v)},[q,$]),e.jsxs("div",{className:"border-b bg-white px-3 py-2 text-sm grid grid-cols-[1fr_auto_1fr] items-center",children:[e.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),e.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),e.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@300;400;500;700;900&family=Heebo:wght@100;200;300;400;500;600;700;800;900&family=Varela+Round&family=Rubik:wght@300;400;500;700;900&family=Assistant:wght@200;300;400;600;700;800&family=Alef:wght@400;700&family=Secular+One&family=Open+Sans:wght@300;400;600;700&family=Roboto:wght@300;400;500;700;900&family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&family=Montserrat:wght@300;400;500;600;700;800;900&display=swap",rel:"stylesheet"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-zinc-900",children:"QuickShop Builder"}),e.jsx("div",{className:"text-zinc-500",children:l?`סלאג: ${l}`:"סלאג: —"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>p(),children:"בטל"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>d(),children:"חזור"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>{const v=new CustomEvent("qs:command",{detail:{open:!0}});window.dispatchEvent(v)},children:"פקודות ⌘K"}),e.jsxs("div",{className:"inline-flex items-center gap-2 ml-2",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>m(1),children:"100%"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>m(g-.1),children:"-"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>m(g+.1),children:"+"}),e.jsxs("span",{className:"text-zinc-500",children:[Math.round(g*100),"%"]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"inline-flex rounded overflow-hidden bg-zinc-100",children:["desktop","tablet","mobile"].map(v=>e.jsx("button",{className:`tab ${i===v?"tab-active":""}`,onClick:()=>r(v),"aria-label":v==="desktop"?"דסקטופ":v==="tablet"?"טאבלט":"מובייל",title:v==="desktop"?"דסקטופ":v==="tablet"?"טאבלט":"מובייל",children:v==="desktop"?e.jsx(Et,{size:16}):v==="tablet"?e.jsx(Dt,{size:16}):e.jsx(Rt,{size:16})},v))})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-end",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>a(!0),children:"תבניות"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>{const v={page:o};try{localStorage.setItem(P,JSON.stringify(v))}catch{}window.open("/assets/react-builder/preview.html","_blank")},children:"תצוגה מקדימה"}),e.jsx("button",{className:"btn",disabled:b||!l,style:{background:"#111",color:"white",opacity:b?.6:1},onClick:q,children:b?"שומר…":"שמור"}),e.jsx("button",{className:"btn",disabled:c||!l,style:{background:"#6d28d9",color:"white",opacity:c?.6:1},onClick:$,children:c?"מפרסם…":"פרסום"})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-start justify-center pt-24 z-50",onClick:()=>a(!1),children:e.jsxs("div",{className:"w-[720px] rounded-lg bg-white shadow-xl border",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"תבניות דף בית"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:W,children:"ייצוא"}),e.jsxs("label",{className:"btn btn-ghost cursor-pointer",children:["ייבוא",e.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:async v=>{var A;const H=(A=v.target.files)==null?void 0:A[0];if(!H)return;const E=await H.text();try{h(JSON.parse(E)),a(!1)}catch{}}})]}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>a(!1),children:"סגור"})]})]}),e.jsx(mn,{onUse:(v,H)=>{const E=fn(v,H);h(E),a(!1)}})]})})]})}function fn(i,r){function s(d){const h=JSON.parse(JSON.stringify(d));if(h.id=se(),h.type==="container"){if(h.columnsChildren){const g=h.columnsChildren;h.columnsChildren=g.map(m=>m.map(s))}h.children&&(h.children=h.children.map(s))}return h}return{id:se(),name:r,sections:i.map(d=>({...JSON.parse(JSON.stringify(d)),id:se(),widgets:d.widgets.map(s)}))}}function mn({onUse:i}){const r=z.useMemo(()=>[{key:"classic-storefront",name:"חנות קלאסית",icon:e.jsx(et,{size:18}),description:"עמוד בית שלם: הירו פתיח, יתרונות, מוצרים נבחרים וקריאה לפעולה.",sections:[{id:"s1",container:"fixed",style:{maxWidth:"1140px",margin:{bottom:0}},widgets:[{id:"w1",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.45)",heading:"<strong>ברוכים הבאים</strong>",text:"קולקציה חדשה נחתה",ctaLabel:"גלו עוד",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:36,fontWeight:700,color:"#ffffff"},textStyle:{fontSize:18,color:"#ffffff"},buttonStyle:{background:"#7c3aed",color:"#fff",borderRadius:6},style:{minHeight:320}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"w2",type:"container",visible:!0,flex:{direction:"row",gap:16},columns:3,columnsChildren:[[{id:"h1",type:"heading",visible:!0,content:"משלוח מהיר",tag:"h3",style:{fontSize:20,lineHeight:1}},{id:"t1",type:"text",visible:!0,content:"עד הבית, בזמן שיא.",style:{fontSize:14,lineHeight:1,padding:{top:8,right:8,bottom:8,left:8}}}],[{id:"h2",type:"heading",visible:!0,content:"החזרה קלה",tag:"h3",style:{fontSize:20,lineHeight:1}},{id:"t2",type:"text",visible:!0,content:"30 יום להתחרט בנחת.",style:{fontSize:14,lineHeight:1,padding:{top:8,right:8,bottom:8,left:8}}}],[{id:"h3",type:"heading",visible:!0,content:"שירות אישי",tag:"h3",style:{fontSize:20,lineHeight:1}},{id:"t3",type:"text",visible:!0,content:"אנחנו תמיד כאן בשבילך.",style:{fontSize:14,lineHeight:1,padding:{top:8,right:8,bottom:8,left:8}}}]],children:[]}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"w3",type:"productSlider",visible:!0,title:"מוצרים נבחרים",productIds:[],slidesPerView:{desktop:4,tablet:2,mobile:1},arrows:!0,dots:!1,autoplay:!1,style:{}}]},{id:"s4",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"w4",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.6)",heading:"<strong>מצטרפים למועדון?</strong>",text:"קבלו הטבות בלעדיות ועדכונים חמים",ctaLabel:"הצטרפו עכשיו",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:30,fontWeight:700,color:"#ffffff"},textStyle:{fontSize:16,color:"#ffffff"},buttonStyle:{background:"#7c3aed",color:"#fff",borderRadius:6},style:{minHeight:220}}]}]},{key:"hero-heading-text-cta",name:"הירו + תכנים + CTA",icon:e.jsx(Lt,{size:18}),description:"פתיח חזק, בלוק תוכן קריאתי, הירו נוסף לחידוד ומסיים בקריאה לפעולה.",sections:[{id:"s1",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"b1",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.35)",heading:"<strong>קולקציה חדשה</strong>",text:"הטרנדים החמים של העונה",ctaLabel:"לגלריה",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:34,fontWeight:700,color:"#ffffff"},textStyle:{fontSize:16,color:"#ffffff"},buttonStyle:{background:"#111",color:"#fff",borderRadius:6},style:{minHeight:300}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"h1",type:"heading",visible:!0,content:"למה לבחור בנו?",tag:"h2",style:{fontSize:28,lineHeight:1}},{id:"t1",type:"text",visible:!0,content:"איכות בלתי מתפשרת, משלוח מהיר ושירות אישי — חווית קנייה אחרת.",style:{fontSize:16,lineHeight:1,padding:{top:12,right:12,bottom:12,left:12}}}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"b2",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.25)",heading:"<strong>בחרו את הסטייל</strong>",text:"אלגנטי, קז׳ואל או ספורטיבי — הכל במקום אחד",ctaLabel:"רכשו עכשיו",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:28,fontWeight:700,color:"#ffffff"},textStyle:{fontSize:16,color:"#ffffff"},buttonStyle:{background:"#7c3aed",color:"#fff",borderRadius:6},style:{minHeight:220}}]},{id:"s4",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"cta1",type:"button",visible:!0,label:"התחילו לקנות",href:"#",style:{background:"#7c3aed",color:"#fff",padding:{top:10,bottom:10,left:16,right:16}}}]}]},{key:"split-feature",name:"שני טורים + סליידר + CTA",icon:e.jsx(Tt,{size:18}),description:"פריסת עמודות, ויז׳ואל לצד מסר, המשך למוצרים וסיום בקריאה לפעולה.",sections:[{id:"s1",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"h1",type:"heading",visible:!0,content:"הסיפור שלנו",tag:"h2",style:{fontSize:28,lineHeight:1}},{id:"t1",type:"text",visible:!0,content:"מוצרי איכות, עיצוב מוקפד וקהילה נאמנה — כך בונים מותג.",style:{fontSize:16,lineHeight:1,padding:{top:12,right:12,bottom:12,left:12}}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"w1",type:"container",visible:!0,flex:{direction:"row",gap:16},columns:2,columnsChildren:[[{id:"h2",type:"heading",visible:!0,content:"למה דווקא אנחנו",tag:"h3",style:{fontSize:22,lineHeight:1}},{id:"t2",type:"text",visible:!0,content:"כי אכפת לנו מהמלאכה, מהחומרים ומהלקוחות.",style:{fontSize:15,lineHeight:1,padding:{top:8,right:8,bottom:8,left:8}}}],[{id:"img1",type:"image",visible:!0,src:"https://picsum.photos/800/500",style:{borderRadius:8}}]],children:[]}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"ps1",type:"productSlider",visible:!0,title:"חדש על המדף",productIds:[],slidesPerView:{desktop:4,tablet:2,mobile:1},arrows:!0,dots:!0,autoplay:!1,style:{}}]},{id:"s4",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"cta2",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.5)",heading:"<strong>מוכנים להזמין?</strong>",text:"שליח עד הבית תוך 48 שעות",ctaLabel:"הוסיפו לעגלה",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:28,fontWeight:700,color:"#ffffff"},textStyle:{fontSize:16,color:"#ffffff"},buttonStyle:{background:"#7c3aed",color:"#fff",borderRadius:6},style:{minHeight:200}}]}]},{key:"gallery",name:"גלריית השראה מלאה",icon:e.jsx(he,{size:18}),description:"פתיח קצר, גלריה תדמיתית ורכיב CTA לסיום.",sections:[{id:"s1",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"h1",type:"heading",visible:!0,content:"השראה לעיצוב יומיומי",tag:"h2",style:{fontSize:28,lineHeight:1}},{id:"t1",type:"text",visible:!0,content:"אוספים ויזואלים שידליקו לכם רעיונות לשילובים מנצחים.",style:{fontSize:16,lineHeight:1,padding:{top:12,right:12,bottom:12,left:12}}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"w1",type:"gallery",visible:!0,images:[],columns:3,gap:12,style:{}}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"cta3",type:"button",visible:!0,label:"צפו בכל הקולקציות",href:"#",style:{background:"#7c3aed",color:"#fff",padding:{top:10,bottom:10,left:16,right:16}}}]}]},{key:"marquee-sale",name:"דף סייל",icon:e.jsx(At,{size:18}),description:"פס רץ להכרזה, הירו מבצע, מוצרים חמים וקריאה לפעולה.",sections:[{id:"s0",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"mq1",type:"marquee",visible:!0,text:"סייל! עד 50% הנחה • משלוח חינם מעל 199₪",speed:30,style:{}}]},{id:"s1",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"b1",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.6)",heading:"<strong>סוף עונה</strong>",text:"הנחות מטורפות על מגוון פריטים",ctaLabel:"לכל המבצעים",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:34,fontWeight:800,color:"#ffffff"},textStyle:{fontSize:18,color:"#ffffff"},buttonStyle:{background:"#7c3aed",color:"#fff",borderRadius:6},style:{minHeight:280}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"ps1",type:"productSlider",visible:!0,title:"חם עכשיו",productIds:[],slidesPerView:{desktop:4,tablet:2,mobile:1},arrows:!0,dots:!0,autoplay:!0,style:{}}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"cta4",type:"button",visible:!0,label:"קנו לפני שנגמר",href:"#",style:{background:"#111",color:"#fff",padding:{top:10,bottom:10,left:16,right:16}}}]}]},{key:"minimal-cta",name:"מינימליסטי ממיר",icon:e.jsx(qt,{size:18}),description:"כותרת חזקה, טקסט קצר, מוצרים מובילים ובאנר CTA מסכם.",sections:[{id:"s1",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"h1",type:"heading",visible:!0,content:"הכי נמכרים אצלנו",tag:"h2",style:{fontSize:28,lineHeight:1}},{id:"t1",type:"text",visible:!0,content:"פריטים שנחטפים בכל יום — אל תפספסו.",style:{fontSize:16,lineHeight:1,padding:{top:12,right:12,bottom:12,left:12}}},{id:"b1",type:"button",visible:!0,label:"לכל המוצרים",href:"#",style:{background:"#7c3aed",color:"#fff",padding:{top:8,bottom:8,left:12,right:12}}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"ps1",type:"productSlider",visible:!0,title:"מומלצים בשבילך",productIds:[],slidesPerView:{desktop:4,tablet:2,mobile:1},arrows:!0,dots:!1,autoplay:!1,style:{}}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"b2",type:"banner",visible:!0,overlayColor:"rgba(0,0,0,0.4)",heading:"<strong>הטבות מועדון</strong>",text:"צוברים נקודות וקונים חכם",ctaLabel:"הצטרפו עכשיו",ctaHref:"#",contentPosition:{horizontal:"center",vertical:"center"},headingStyle:{fontSize:28,fontWeight:700,color:"#ffffff"},textStyle:{fontSize:16,color:"#ffffff"},buttonStyle:{background:"#111",color:"#fff",borderRadius:6},style:{minHeight:200}}]}]},{key:"brand-story",name:"סיפור המותג",icon:e.jsx(et,{size:18}),description:"עמוד שמספר את הערכים והסיפור מאחורי המותג, עם CTA בסוף.",sections:[{id:"s1",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"h1",type:"heading",visible:!0,content:"מי אנחנו",tag:"h2",style:{fontSize:30,lineHeight:1}},{id:"t1",type:"text",visible:!0,content:"התחלנו בסטודיו קטן עם חלום גדול — להביא איכות ללא פשרות.",style:{fontSize:16,lineHeight:1,padding:{top:12,right:12,bottom:12,left:12}}}]},{id:"s2",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"c1",type:"container",visible:!0,flex:{direction:"row",gap:16},columns:2,columnsChildren:[[{id:"t2",type:"text",visible:!0,content:"אנחנו בוחרים חומרים ברי קיימא ומייצרים באהבה.",style:{fontSize:15,lineHeight:1,padding:{top:8,right:8,bottom:8,left:8}}}],[{id:"img1",type:"image",visible:!0,src:"https://picsum.photos/700/500",style:{borderRadius:8}}]],children:[]}]},{id:"s3",container:"fixed",style:{maxWidth:"1140px"},widgets:[{id:"b2",type:"button",visible:!0,label:"צפו במוצרים שלנו",href:"#",style:{background:"#7c3aed",color:"#fff",padding:{top:10,bottom:10,left:16,right:16}}}]}]}],[]);return e.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:r.map(s=>e.jsxs("div",{className:"border rounded p-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-zinc-700",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded bg-zinc-100",children:s.icon}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx("div",{className:"text-xs text-zinc-500 leading-5",children:s.description}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>i(s.sections,s.name),children:"השתמש"})})]},s.key))})}function vn(){return e.jsxs("div",{className:"h-full grid grid-rows-[auto_1fr]",children:[e.jsx(xn,{}),e.jsxs("div",{className:"grid grid-cols-[280px_1fr_320px] h-[calc(100vh-40px)] overflow-hidden",children:[e.jsx("div",{className:"panel border-r border-zinc-200 overflow-hidden",children:e.jsx(Ut,{})}),e.jsx("div",{className:"canvas-column overflow-hidden",children:e.jsx(Gt,{})}),e.jsx("div",{className:"panel border-l border-zinc-200 overflow-hidden",children:e.jsx(gn,{})})]})]})}function bn(){var a;const[i,r]=z.useState(!1),[s,p]=z.useState(""),d=j(b=>b.addWidget),h=j(b=>b.clearPage),g=j(b=>b.page);z.useEffect(()=>{const b=c=>{var C;return r(!!((C=c.detail)!=null&&C.open))},_=c=>{(c.metaKey||c.ctrlKey)&&c.key.toLowerCase()==="k"&&(c.preventDefault(),r(C=>!C))};return window.addEventListener("qs:command",b),window.addEventListener("keydown",_),()=>{window.removeEventListener("qs:command",b),window.removeEventListener("keydown",_)}},[]);const m=(a=g.sections[0])==null?void 0:a.id,k=z.useMemo(()=>gt.filter(b=>b.label.includes(s)),[s]),N=z.useMemo(()=>{const b=[],_=s.trim();function c(C){return _===""||C.includes(_)}return(c("טען תבנית")||c("תבנית")||c("טעון"))&&b.push({key:"open-templates",label:"טען תבנית (פתח מודל תבניות)",icon:e.jsx("span",{children:"📦"}),action:()=>window.dispatchEvent(new CustomEvent("qs:toolbar",{detail:{action:"openTemplates"}}))}),c("שמור")&&b.push({key:"save",label:"שמור (Draft)",icon:e.jsx("span",{children:"💾"}),action:()=>window.dispatchEvent(new CustomEvent("qs:toolbar",{detail:{action:"save"}}))}),(c("פרסום")||c("פרסם"))&&b.push({key:"publish",label:"פרסום (Publish)",icon:e.jsx("span",{children:"🚀"}),action:()=>window.dispatchEvent(new CustomEvent("qs:toolbar",{detail:{action:"publish"}}))}),c("מחק הכל")&&b.push({key:"clear-all",label:"מחק הכל (נקה עמוד)",icon:e.jsx(pt,{size:20}),action:()=>{confirm("למחוק את כל התוכן בעמוד?")&&h()}}),b},[s,h]);return i?kt.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-start justify-center pt-24 z-50",onClick:()=>r(!1),children:e.jsxs("div",{className:"w-[640px] rounded-xl bg-white shadow-2xl border",onClick:b=>b.stopPropagation(),children:[e.jsx("input",{autoFocus:!0,value:s,onChange:b=>p(b.target.value),placeholder:"חפש פקודה או אלמנט",className:"w-full h-12 px-5 text-lg border-b outline-none"}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[N.map(b=>e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-zinc-50",onClick:()=>{b.action(),r(!1)},children:[b.icon,e.jsx("span",{className:"text-base",children:b.label})]},b.key)),k.map(b=>e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-zinc-50",onClick:()=>{m&&d(m,b.create()),r(!1)},children:[e.jsx(b.icon,{size:20}),e.jsx("span",{className:"text-base",children:b.label})]},b.type)),k.length===0&&N.length===0&&e.jsx("div",{className:"p-4 text-sm text-zinc-500",children:"אין תוצאות"})]})]})}),document.body):null}function yn(){return e.jsxs("div",{className:"h-full",children:[e.jsx(vn,{}),e.jsx(bn,{})]})}St.createRoot(document.getElementById("builder-root")||document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(jn,{children:e.jsx(yn,{})})}));function jn({children:i}){const r=j(s=>s.setBootstrap);return T.useEffect(()=>{var d;const p=window.__BUILDER_BOOTSTRAP__;if(p)r({storeSlug:p.storeSlug,components:((d=p.page)==null?void 0:d.sections)||p.components,etag:p.etag,updatedAt:p.updatedAt,isPublished:p.isPublished});else try{const h=localStorage.getItem("quickshop:bootstrap:last");if(h){const g=JSON.parse(h);r(g)}}catch{}},[r]),e.jsx(e.Fragment,{children:i})}
